<div class="container">
  <div class="row">
    <div class="col-md-9">
      <h1><%= @question.title %></h1>
    </div>
    <div class="col-md-3">
      <p>Posted by: <%= @question.user.username %></p>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col-md-1">
      <%= link_to "", question_votes_path(@question.id, direction: "up", type: "question"), method: 'post', class: "glyphicon glyphicon-chevron-up" %>
      <p><%=@question.total%> votes</p>
      <%= link_to "", question_votes_path(@question.id, direction: "down", type: "question"), method: 'post', class: "glyphicon glyphicon-chevron-down" %>
    </div>
    <div class="col-md-11">
      <h4><%= @question.text %></h4>
    </div>
  </div>
</div>

<div class="container">
  <div class="container">
    <% @question.comments.each do |c| %>
      <p><%= c.user.username %> : <%= c.text %>
      <%= link_to "delete", [@question, c], :method  => :delete %></p>
    <% end %>
    <% if session[:user_id] != nil %>
      <%= render partial: "comments/question_comment", locals: {question: @question, comment: @comment} %>
    <%else %>
      You must <%= link_to 'login', login_path %> or <%= link_to 'sign up', new_user_path %> to add a comment!
    <%end%>
  </div>
</div>

<hr>
<div class="container">
  <h5> <%= @question.answers.count %> Answers </h5>
</div>

<div class="container">
  <% @question.answers.order(total: :desc).each do |ans| %>
  <% if @question.correct_answer == ans.id %>
    Best Answer:
    <%= render partial: "answers/show", locals: {answer: ans} %>
    <div class="container">
      <% ans.comments.each do |c| %>
        <p><%= c.user.username %> : <%= c.text %></p>
      <% end %>
        <%= render partial: "comments/answer_comment", locals: { answer: ans, comment: @comment } %>
      <% end %>
    </div>
  <% end %>
</div>
<hr>
<div class="container">
  <% @question.answers.order(total: :desc).each do |ans| %>
    <% if @question.correct_answer != ans.id %>
      <%= render partial: "answers/show", locals: {answer: ans} %>
      <div class="container">
        <% ans.comments.each do |c| %>
          <p><%= c.user.username %> : <%= c.text %></p>
        <% end %>
        <% if session[:user_id] != nil %>
          <%= render partial: "comments/answer_comment", locals: { answer: ans, comment: @comment } %>
        <%else %>
          <p>You must <%= link_to 'login', login_path %> or <%= link_to 'sign up', new_user_path %> to add a comment!</p><br>
        <%end%>
      </div>
    <% end %>
  <% end %>
</div>

<hr>
<div class="container">
  <h5>Your Answer:</h5>
  <% if session[:user_id] == nil %>
    <p>You must <%= link_to 'login', login_path %> or <%= link_to 'sign up', new_user_path %> to add an answer!</p><br>
  <%else%>
      <%= render partial: "answers/new", locals: {answer: @answer, question: @question} %>
  <% end %>
</div>

<hr>

<div class="container">
  <%= link_to "Return to Questions!", questions_path%>
</div>


